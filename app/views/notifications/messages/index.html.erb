<%= do_index({
  title: t(".#{params[:messagetype]}"),
  columns: [
    :id,
    :subject,
    Btemplater::IndexDecorator.new(:sender, Proc.new{ |d| d.try(:pretty_name) }),
    Btemplater::IndexDecorator.new(:recipient, Proc.new{ |d| d.try(:pretty_name) }),
    Btemplater::IndexDecorator.new(:created_at, Proc.new{ |d| l(d) })
  ],
  items: @objects,
  model: Notifications::Message,
  actions: [
    Btemplater::ActionDecorator.new(
      :show,
      Proc.new { |objs| notifications.message_path(params[:messagetype], objs) },
      t('actions.show'),
      'file'
    )
  ]
  })
%>

<%= do_new_button({model: Notifications::Message}) %>
